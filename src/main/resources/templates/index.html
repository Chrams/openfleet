<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Meta and viewport settings -->
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE-edge"/>
    <meta name="viewport" content="width-device-width, initial-scale=1"/>

    <!-- Header Section -->
    <title>OpenFleet</title>
    <link rel="stylesheet" href="css/style.css"/>

</head>
<body>

<!-- Top navigation bar -->
<div th:replace="navbar :: navbar-top"></div>

<!-- Header -->
<div th:replace="header :: header-top"></div>

<!-- Breadcrumb -->
<section id="breadcrumb">
    <div class="container">
        <ol class="breadcrumb">
            <li class="active">Dashboard</li>
        </ol>
    </div>
</section>

<!-- Main -->
<section id="main">
    <div class="container">
        <div class="row">
            <div class="col-md-3">
                <div class="list-group">
                    <a href="#" class="list-group-item active">Dashboard</a>
                    <a href="#" class="list-group-item ">Something <span class="badge">33</span></a>
                    <a href="#" class="list-group-item ">Something <span class="badge">2</span></a>
                    <a href="#" class="list-group-item ">Something <span class="badge">55</span></a>
                    <a href="#" class="list-group-item ">Something <span class="badge">1</span></a>
                </div>
            </div>
            <div class="col-md-9">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title"><i class="fa fa-pie-chart"></i> Fleet status</h3>
                    </div>
                    <div class="panel-body">
                        <div id="myPieChart"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- footer -->
<div th:replace="footer :: footer"></div>

<!-- Scripts -->
<script src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load('current', {packages: ['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        // Define the chart to be drawn.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Element');
        data.addColumn('number', 'Percentage');
        var retArray = [];
        $.getJSON('/api/drivers', function(JsonObj) {
            for(var i in JsonObj) {
                var array = [];
                array[0] = JsonObj[i]['name'];
                array[1] = JsonObj[i]['share'];
                retArray[i] = array;
            }
            data.addRows(retArray);
            var chart = new google.visualization.PieChart(document.getElementById('myPieChart'));
            chart.draw(data, null);
        });
        console.log(retArray);
        // Instantiate and draw the chart.

    }
</script>
</body>
</html>